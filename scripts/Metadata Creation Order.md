# Goal:
- Create an Ingestion API with DSO, DLO and Data Stream with a single click or single package deployment so it can be deployed over multiple Data Cloud Instances without the need for manual user steps.
- As an ISV I want to package my all Ingestion API related metadata in a single package, so I can distribute a fully configured Ingestion API + Data Stream to my customers.

# Problem
- All Setup Entities can be created trhough metadata but the Platform Entities don't seem to be created through Apex nor API. 
- From the UI you cannot select the ingestion DSO / DLO if you create a new data stream.
- Without the ability to create a DataStream (1ds) and DataLakeObjectInstance (1dl) it is completely useless to be able to create the metadata as you cannot reach it.

# Steps in this order:
- 01) Create DataConnectorIngestApi metadata
- 02) Create DataSource metadata
- 03) Create ExternalDataConnector metadata, (Has a 1:1 Relationship with DataConnectorIngestApi)
- 04) Create MktDataTranObject + Fields
- 05) Create ExternalDataTranObject + Fields (Object has relationship with MktDataTranObject and Fields have relationship to MktDataTranFields)
- 06) Create DataSourceObject + fields (Has a relationship to DataSource)
- 07) Create CustomObject (Data Lake Object) + fields
- 08) Create DataStreamDefinition
----- Problems below ----
- 09) Create DataLakeObjectInstance (1dl) record
- 10) Create DataStream (1ds) record


<?xml version="1.0" encoding="UTF-8"?><soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:mdt="http://soap.sforce.com/2006/04/metadata"><soapenv:Header><mdt:SessionHeader><mdt:sessionId>SESSION_ID_REMOVED</mdt:sessionId></mdt:SessionHeader><mdt:CallOptions><mdt:client></mdt:client><mdt:defaultNamespace></mdt:defaultNamespace></mdt:CallOptions><mdt:AllOrNoneHeader><mdt:allOrNone>true</mdt:allOrNone></mdt:AllOrNoneHeader></soapenv:Header><soapenv:Body><mdt:upsertMetadata><mdt:metadata xsi:type="mdt:DataConnectorIngestApi"><fullName>JST_Test_Ingestion_API_04</fullName><masterLabel>JST Test Ingestion API 04</masterLabel><sourceName>JST_Test_Ingestion_API_04</sourceName></mdt:metadata></mdt:upsertMetadata></soapenv:Body></soapenv:Envelope>


<?xml version="1.0" encoding="UTF-8"?><soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:mdt="http://soap.sforce.com/2006/04/metadata"><soapenv:Header><mdt:SessionHeader><mdt:sessionId>SESSION_ID_REMOVED</mdt:sessionId></mdt:SessionHeader><mdt:CallOptions><mdt:client></mdt:client><mdt:defaultNamespace></mdt:defaultNamespace></mdt:CallOptions><mdt:AllOrNoneHeader><mdt:allOrNone>true</mdt:allOrNone></mdt:AllOrNoneHeader></soapenv:Header><soapenv:Body><mdt:upsertMetadata><mdt:metadata xsi:type="mdt:DataSource"><fullName>JST_Test_Connector_04</fullName><masterLabel>JST Test Connector 04</masterLabel><prefix>TC4</prefix></mdt:metadata></mdt:upsertMetadata></soapenv:Body></soapenv:Envelope>


<?xml version="1.0" encoding="UTF-8"?><soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:mdt="http://soap.sforce.com/2006/04/metadata"><soapenv:Header><mdt:SessionHeader><mdt:sessionId>SESSION_ID_REMOVED</mdt:sessionId></mdt:SessionHeader><mdt:CallOptions><mdt:client></mdt:client><mdt:defaultNamespace></mdt:defaultNamespace></mdt:CallOptions><mdt:AllOrNoneHeader><mdt:allOrNone>true</mdt:allOrNone></mdt:AllOrNoneHeader></soapenv:Header><soapenv:Body><mdt:upsertMetadata><mdt:metadata xsi:type="mdt:ExternalDataConnector"><fullName>JST_Test_Connector_04</fullName><dataConnectionStatus>Connected</dataConnectionStatus><dataConnectorConfiguration>JST_Test_Ingestion_API_04</dataConnectorConfiguration><dataConnectorType>IngestApi</dataConnectorType><dataPlatform>Ingest_Api</dataPlatform><masterLabel>JST Test Connector 04</masterLabel></mdt:metadata></mdt:upsertMetadata></soapenv:Body></soapenv:Envelope>


<?xml version="1.0" encoding="UTF-8"?><soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:mdt="http://soap.sforce.com/2006/04/metadata"><soapenv:Header><mdt:SessionHeader><mdt:sessionId>SESSION_ID_REMOVED</mdt:sessionId></mdt:SessionHeader><mdt:CallOptions><mdt:client></mdt:client><mdt:defaultNamespace></mdt:defaultNamespace></mdt:CallOptions><mdt:AllOrNoneHeader><mdt:allOrNone>true</mdt:allOrNone></mdt:AllOrNoneHeader></soapenv:Header><soapenv:Body><mdt:upsertMetadata><mdt:metadata xsi:type="mdt:MktDataTranObject"><fullName>JST_Test_Connector_04_JST_Test_Object_04</fullName><connector>JST_Test_Connector_04</connector><creationType>Custom</creationType><dataSource>JST_Test_Connector_04</dataSource><dataSourceObject>JST_Test_Connector_04_JST_Test_Object_04</dataSourceObject><mktDataTranFields><creationType>Custom</creationType><fullName>Test_Text_Field</fullName><datatype>S</datatype><externalName>JST_Test_Object_04.Test_Text_Field</externalName><masterLabel>Test Text Field</masterLabel></mktDataTranFields><mktDataTranFields><creationType>Custom</creationType><fullName>Test_Number_Field</fullName><datatype>N</datatype><externalName>JST_Test_Object_04.Test_Number_Field</externalName><masterLabel>Test Number Field</masterLabel></mktDataTranFields><mktDataTranFields><creationType>Custom</creationType><fullName>Test_Date_Field</fullName><datatype>D</datatype><externalName>JST_Test_Object_04.Test_Date_Field</externalName><masterLabel>Test Date Field</masterLabel></mktDataTranFields><mktDataTranFields><creationType>Custom</creationType><fullName>Test_Date_Time_Field</fullName><datatype>F</datatype><externalName>JST_Test_Object_04.Test_Date_Time_Field</externalName><masterLabel>Test Date Time_Field</masterLabel></mktDataTranFields><masterLabel>JST Test Object 04</masterLabel><objectCategory>Salesforce_SFDCReferenceModel_0_93.Related</objectCategory></mdt:metadata></mdt:upsertMetadata></soapenv:Body></soapenv:Envelope>


<?xml version="1.0" encoding="UTF-8"?><soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:mdt="http://soap.sforce.com/2006/04/metadata"><soapenv:Header><mdt:SessionHeader><mdt:sessionId>SESSION_ID_REMOVED</mdt:sessionId></mdt:SessionHeader><mdt:CallOptions><mdt:client></mdt:client><mdt:defaultNamespace></mdt:defaultNamespace></mdt:CallOptions><mdt:AllOrNoneHeader><mdt:allOrNone>true</mdt:allOrNone></mdt:AllOrNoneHeader></soapenv:Header><soapenv:Body><mdt:upsertMetadata><mdt:metadata xsi:type="mdt:ExternalDataConnector"><fullName>JST_Test_Connector_04</fullName><dataConnectionStatus>Connected</dataConnectionStatus><dataConnectorConfiguration>JST_Test_Ingestion_API_04</dataConnectorConfiguration><dataConnectorType>IngestApi</dataConnectorType><dataPlatform>Ingest_Api</dataPlatform><externalDataTranObjects><fullName>JST_Test_Object_04</fullName><availabilityStatus>Available</availabilityStatus><creationType>Custom</creationType><externalDataTranFields><fullName>Test_Text_Field</fullName><creationType>Custom</creationType><datatype>S</datatype><externalName>Test_Text_Field</externalName><isDataRequired>false</isDataRequired><length>0</length><masterLabel>Test_Text_Field</masterLabel><mktDataTranField>JST_Test_Connector_04_JST_Test_Object_04.Test_Text_Field__c</mktDataTranField><precision>0</precision><primaryIndexOrder>0</primaryIndexOrder><scale>0</scale><sequence>0</sequence></externalDataTranFields><externalDataTranFields><fullName>Test_Number_Field</fullName><creationType>Custom</creationType><datatype>N</datatype><externalName>Test_Number_Field</externalName><isDataRequired>false</isDataRequired><length>0</length><masterLabel>Test_Number_Field</masterLabel><mktDataTranField>JST_Test_Connector_04_JST_Test_Object_04.Test_Number_Field__c</mktDataTranField><precision>0</precision><primaryIndexOrder>0</primaryIndexOrder><scale>0</scale><sequence>0</sequence></externalDataTranFields><externalDataTranFields><fullName>Test_Date_Field</fullName><creationType>Custom</creationType><datatype>D</datatype><externalName>Test_Date_Field</externalName><isDataRequired>false</isDataRequired><length>0</length><masterLabel>Test_Date_Field</masterLabel><mktDataTranField>JST_Test_Connector_04_JST_Test_Object_04.Test_Date_Field__c</mktDataTranField><precision>0</precision><primaryIndexOrder>0</primaryIndexOrder><scale>0</scale><sequence>0</sequence></externalDataTranFields><externalDataTranFields><fullName>Test_Date_Time_Field</fullName><creationType>Custom</creationType><datatype>F</datatype><externalName>Test_Date_Time_Field</externalName><isDataRequired>false</isDataRequired><length>0</length><masterLabel>Test_Date_Time_Field</masterLabel><mktDataTranField>JST_Test_Connector_04_JST_Test_Object_04.Test_Date_Time_Field__c</mktDataTranField><precision>0</precision><primaryIndexOrder>0</primaryIndexOrder><scale>0</scale><sequence>0</sequence></externalDataTranFields><masterLabel>JST Test Object 04</masterLabel><mktDataTranObject>JST_Test_Connector_04_JST_Test_Object_04</mktDataTranObject><objectCategory>Salesforce_SFDCReferenceModel_0_93.Related</objectCategory></externalDataTranObjects><masterLabel>JST Test Connector 04</masterLabel></mdt:metadata></mdt:upsertMetadata></soapenv:Body></soapenv:Envelope>


<?xml version="1.0" encoding="UTF-8"?><soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:mdt="http://soap.sforce.com/2006/04/metadata"><soapenv:Header><mdt:SessionHeader><mdt:sessionId>SESSION_ID_REMOVED</mdt:sessionId></mdt:SessionHeader><mdt:CallOptions><mdt:client></mdt:client><mdt:defaultNamespace></mdt:defaultNamespace></mdt:CallOptions><mdt:AllOrNoneHeader><mdt:allOrNone>true</mdt:allOrNone></mdt:AllOrNoneHeader></soapenv:Header><soapenv:Body><mdt:upsertMetadata><mdt:metadata xsi:type="mdt:DataSourceObject"><fullName>JST_Test_Connector_04_JST_Test_Object_04</fullName><dataSource>JST_Test_Connector_04</dataSource><externalRecordIdentifier>JST_Test_Connector_04_JST_Test_Object_04</externalRecordIdentifier><dataSourceFields><fullName>Test_Text_Field</fullName><datatype>S</datatype><externalName>JST_Test_Object_04.Test_Text_Field</externalName><masterLabel>Test Text Field</masterLabel></dataSourceFields><dataSourceFields><fullName>Test_Number_Field</fullName><datatype>N</datatype><externalName>JST_Test_Object_04.Test_Number_Field</externalName><masterLabel>Test Number Field</masterLabel></dataSourceFields><dataSourceFields><fullName>Test_Date_Field</fullName><datatype>D</datatype><externalName>JST_Test_Object_04.Test_Date_Field</externalName><masterLabel>Test Date Field</masterLabel></dataSourceFields><dataSourceFields><fullName>Test_Date_Time_Field</fullName><datatype>F</datatype><externalName>JST_Test_Object_04.Test_Date_Time_Field</externalName><masterLabel>Test Date Time Field</masterLabel></dataSourceFields><masterLabel>JST Test Object 04</masterLabel></mdt:metadata></mdt:upsertMetadata></soapenv:Body></soapenv:Envelope>


<?xml version="1.0" encoding="UTF-8"?><soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:mdt="http://soap.sforce.com/2006/04/metadata"><soapenv:Header><mdt:SessionHeader><mdt:sessionId>SESSION_ID_REMOVED</mdt:sessionId></mdt:SessionHeader><mdt:CallOptions><mdt:client></mdt:client><mdt:defaultNamespace></mdt:defaultNamespace></mdt:CallOptions><mdt:AllOrNoneHeader><mdt:allOrNone>true</mdt:allOrNone></mdt:AllOrNoneHeader></soapenv:Header><soapenv:Body><mdt:upsertMetadata><mdt:metadata xsi:type="mdt:CustomObject"><fullName>JST_Test_Connector_04_JST_Test_Object_04__dll</fullName><label>JST Test Object 04</label><fields><fullName>DataSourceObject__c</fullName><externalId>false</externalId><isFilteringDisabled>false</isFilteringDisabled><isNameField>false</isNameField><isSortingDisabled>false</isSortingDisabled><label>Data Source Object</label><required>false</required><type>Text</type><unique>false</unique><mktDataLakeFieldAttributes><definitionCreationType>System</definitionCreationType><externalName>DataSourceObject</externalName><isRecordModified>false</isRecordModified><isEventDate>false</isEventDate><isInternalOrganization>false</isInternalOrganization><usageTag>NONE</usageTag></mktDataLakeFieldAttributes><length>60</length></fields><fields><fullName>DataSource__c</fullName><externalId>false</externalId><isFilteringDisabled>false</isFilteringDisabled><isNameField>false</isNameField><isSortingDisabled>false</isSortingDisabled><label>Data Source</label><required>false</required><type>Text</type><unique>false</unique><mktDataLakeFieldAttributes><definitionCreationType>System</definitionCreationType><externalName>DataSource</externalName><isRecordModified>false</isRecordModified><isEventDate>false</isEventDate><isInternalOrganization>false</isInternalOrganization><usageTag>NONE</usageTag></mktDataLakeFieldAttributes><length>60</length></fields><fields><fullName>InternalOrganization__c</fullName><externalId>false</externalId><isFilteringDisabled>false</isFilteringDisabled><isNameField>false</isNameField><isSortingDisabled>false</isSortingDisabled><label>Internal Organization</label><required>false</required><type>Text</type><unique>false</unique><mktDataLakeFieldAttributes><definitionCreationType>System</definitionCreationType><externalName>InternalOrganization</externalName><isRecordModified>false</isRecordModified><isEventDate>false</isEventDate><isInternalOrganization>false</isInternalOrganization><usageTag>NONE</usageTag></mktDataLakeFieldAttributes><length>60</length></fields><fields><fullName>cdp_sys_PartitionDate__c</fullName><externalId>false</externalId><isFilteringDisabled>false</isFilteringDisabled><isNameField>false</isNameField><isSortingDisabled>false</isSortingDisabled><label>cdp_sys_PartitionDate</label><required>false</required><type>DateTime</type><unique>false</unique><mktDataLakeFieldAttributes><definitionCreationType>System</definitionCreationType><externalName>cdp_sys_PartitionDate</externalName><isRecordModified>false</isRecordModified><isEventDate>false</isEventDate><isInternalOrganization>false</isInternalOrganization><usageTag>NONE</usageTag></mktDataLakeFieldAttributes></fields><fields><fullName>cdp_sys_SourceVersion__c</fullName><externalId>false</externalId><isFilteringDisabled>false</isFilteringDisabled><isNameField>false</isNameField><isSortingDisabled>false</isSortingDisabled><label>cdp_sys_SourceVersion</label><required>false</required><type>Text</type><unique>false</unique><mktDataLakeFieldAttributes><definitionCreationType>System</definitionCreationType><externalName>cdp_sys_SourceVersion</externalName><isRecordModified>false</isRecordModified><isEventDate>false</isEventDate><isInternalOrganization>false</isInternalOrganization><usageTag>NONE</usageTag></mktDataLakeFieldAttributes><length>60</length></fields><fields><fullName>Test_Text_Field__c</fullName><externalId>false</externalId><isFilteringDisabled>false</isFilteringDisabled><isNameField>false</isNameField><isSortingDisabled>false</isSortingDisabled><label>Test Text Field</label><required>false</required><type>Text</type><unique>false</unique><mktDataLakeFieldAttributes><definitionCreationType>Custom</definitionCreationType><externalName>Test_Text_Field</externalName><isRecordModified>false</isRecordModified><isEventDate>false</isEventDate><isInternalOrganization>false</isInternalOrganization><usageTag>NONE</usageTag></mktDataLakeFieldAttributes><length>60</length></fields><fields><fullName>Test_Number_Field__c</fullName><externalId>false</externalId><isFilteringDisabled>false</isFilteringDisabled><isNameField>false</isNameField><isSortingDisabled>false</isSortingDisabled><label>Test Number Field</label><required>false</required><type>Number</type><unique>false</unique><mktDataLakeFieldAttributes><definitionCreationType>Custom</definitionCreationType><externalName>Test_Number_Field</externalName><isRecordModified>false</isRecordModified><isEventDate>false</isEventDate><isInternalOrganization>false</isInternalOrganization><usageTag>NONE</usageTag></mktDataLakeFieldAttributes><precision>18</precision><scale>6</scale></fields><fields><fullName>Test_Date_Field__c</fullName><externalId>false</externalId><isFilteringDisabled>false</isFilteringDisabled><isNameField>false</isNameField><isSortingDisabled>false</isSortingDisabled><label>Test Date Field</label><required>false</required><type>Date</type><unique>false</unique><mktDataLakeFieldAttributes><definitionCreationType>Custom</definitionCreationType><externalName>Test_Date_Field</externalName><isRecordModified>false</isRecordModified><isEventDate>false</isEventDate><isInternalOrganization>false</isInternalOrganization><usageTag>NONE</usageTag></mktDataLakeFieldAttributes></fields><fields><fullName>Test_Date_Time_Field__c</fullName><externalId>false</externalId><isFilteringDisabled>false</isFilteringDisabled><isNameField>false</isNameField><isSortingDisabled>false</isSortingDisabled><label>Test Date Time_Field</label><required>false</required><type>DateTime</type><unique>false</unique><mktDataLakeFieldAttributes><definitionCreationType>Custom</definitionCreationType><externalName>Test_Date_Time_Field</externalName><isRecordModified>false</isRecordModified><isEventDate>false</isEventDate><isInternalOrganization>false</isInternalOrganization><usageTag>NONE</usageTag></mktDataLakeFieldAttributes></fields><fields><fullName>Primary_Key_Field__c</fullName><externalId>false</externalId><isFilteringDisabled>false</isFilteringDisabled><isNameField>false</isNameField><isSortingDisabled>false</isSortingDisabled><label>Primary Key Field</label><required>false</required><type>Text</type><unique>false</unique><mktDataLakeFieldAttributes><definitionCreationType>Custom</definitionCreationType><externalName>Primary_Key_Field</externalName><isRecordModified>false</isRecordModified><isEventDate>false</isEventDate><isInternalOrganization>false</isInternalOrganization><usageTag>NONE</usageTag></mktDataLakeFieldAttributes><length>60</length></fields><fields><fullName>Record_Modified_Field__c</fullName><externalId>false</externalId><isFilteringDisabled>false</isFilteringDisabled><isNameField>false</isNameField><isSortingDisabled>false</isSortingDisabled><label>Record Modified Field</label><required>false</required><type>DateTime</type><unique>false</unique><mktDataLakeFieldAttributes><definitionCreationType>Custom</definitionCreationType><externalName>Record_Modified_Field</externalName><isRecordModified>false</isRecordModified><isEventDate>true</isEventDate><isInternalOrganization>false</isInternalOrganization><usageTag>NONE</usageTag></mktDataLakeFieldAttributes></fields><fields><fullName>KQ_Primary_Key_Field__c</fullName><externalId>false</externalId><isFilteringDisabled>false</isFilteringDisabled><isNameField>false</isNameField><isSortingDisabled>false</isSortingDisabled><label>KQ_Primary_Key_Field</label><required>false</required><type>Text</type><unique>false</unique><mktDataLakeFieldAttributes><definitionCreationType>System</definitionCreationType><externalName>KQ_Primary_Key_Field</externalName><isRecordModified>false</isRecordModified><isEventDate>false</isEventDate><isInternalOrganization>false</isInternalOrganization><usageTag>KEY_QUALIFIER</usageTag><primaryIndexOrder>1</primaryIndexOrder></mktDataLakeFieldAttributes><length>60</length></fields><mktDataLakeAttributes><creationType>Custom</creationType><isEnabled>true</isEnabled><objectCategory>Salesforce_SFDCReferenceModel_0_93.Engagement</objectCategory></mktDataLakeAttributes></mdt:metadata></mdt:upsertMetadata></soapenv:Body></soapenv:Envelope>


<?xml version="1.0" encoding="UTF-8"?><soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:mdt="http://soap.sforce.com/2006/04/metadata"><soapenv:Header><mdt:SessionHeader><mdt:sessionId>SESSION_ID_REMOVED</mdt:sessionId></mdt:SessionHeader><mdt:CallOptions><mdt:client></mdt:client><mdt:defaultNamespace></mdt:defaultNamespace></mdt:CallOptions><mdt:AllOrNoneHeader><mdt:allOrNone>true</mdt:allOrNone></mdt:AllOrNoneHeader></soapenv:Header><soapenv:Body><mdt:upsertMetadata><mdt:metadata xsi:type="mdt:DataStreamDefinition"><fullName>JST_Test_Connector_04_JST_Test_Object_04</fullName><areHeadersIncludedInFile>false</areHeadersIncludedInFile><bulkIngest>false</bulkIngest><creationType>Custom</creationType><dataConnector>JST_Test_Connector_04</dataConnector><dataConnectorType>IngestApi</dataConnectorType><dataPlatformDataSetItemName>INGESTAPI</dataPlatformDataSetItemName><dataSource>JST_Test_Connector_04</dataSource><isLimitedToNewFiles>false</isLimitedToNewFiles><isMissingFileFailure>false</isMissingFileFailure><masterLabel>JST Test Connector 04_JST Test Object 04</masterLabel><mktDataLakeObject>JST_Test_Connector_04_JST_Test_Object_04__dll</mktDataLakeObject><mktDataTranObject>JST_Test_Connector_04_JST_Test_Object_04</mktDataTranObject></mdt:metadata></mdt:upsertMetadata></soapenv:Body></soapenv:Envelope>
